{"ast":null,"code":"import _objectSpread from\"/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState,useEffect,useContext}from\"react\";import{BASE_URL}from\"./fetchStories\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext(undefined);export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState=useState({user:{createdAt:\"\",favorites:[],name:\"\",stories:[],updatedAt:\"\",username:\"\"}}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),ownStories=_useState4[0],setOwnStories=_useState4[1];var isLoggedIn=localStorage.length!==0;var storedToken=localStorage.getItem(\"token\");var storedUsername=localStorage.getItem(\"username\");var navigate=useNavigate();var autoLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var updatedUser;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(storedToken&&storedUsername)){_context.next=11;break;}_context.prev=1;_context.next=4;return updateUser();case 4:updatedUser=_context.sent;setUser(updatedUser);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error(\"Auto login failed:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}));return function autoLogin(){return _ref2.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(isLoggedIn);_context2.next=3;return autoLogin();case 3:case\"end\":return _context2.stop();}},_callee2);}))();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){return console.log(\"User after update\",user);},[user]);var login=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username,password){var response,userData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(BASE_URL,\"/login\"),{method:\"POST\",body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context3.sent;if(!response.ok){_context3.next=14;break;}_context3.next=7;return response.json();case 7:userData=_context3.sent;console.log(\"User data on login:\",userData);setUser({user:userData.user});saveCredentialsinLocalStorage(userData.token,userData.user.username);navigate(\"/home\");_context3.next=15;break;case 14:throw new Error(\"Login failed\");case 15:_context3.next=20;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 20:case\"end\":return _context3.stop();}},_callee3,null,[[0,17]]);}));return function login(_x,_x2){return _ref4.apply(this,arguments);};}();var signup=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(username,password,name){var response,userData;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(BASE_URL,\"/signup\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:{username:username,password:password,name:name}})});case 3:response=_context4.sent;if(!response.ok){_context4.next=13;break;}_context4.next=7;return response.json();case 7:userData=_context4.sent;setUser({user:userData.user});saveCredentialsinLocalStorage(userData.token,userData.user.username);navigate(\"/home\");_context4.next=14;break;case 13:throw new Error(\"Login failed\");case 14:_context4.next=19;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 19:case\"end\":return _context4.stop();}},_callee4,null,[[0,16]]);}));return function signup(_x3,_x4,_x5){return _ref5.apply(this,arguments);};}();var saveCredentialsinLocalStorage=function saveCredentialsinLocalStorage(token,username){console.debug(\"saveUserCredentialsInLocalStorage\");localStorage.setItem(\"token\",token);localStorage.setItem(\"username\",username);console.log(localStorage);};var logout=function logout(){setUser({user:{createdAt:\"\",favorites:[],name:\"\",stories:[],updatedAt:\"\",username:\"\"}});setOwnStories([]);localStorage.clear();console.log(isLoggedIn);};var updateUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var response,userData;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch(\"\".concat(BASE_URL,\"/users/\").concat(storedUsername,\"?token=\").concat(storedToken),{method:\"GET\",headers:{\"Content-Type\":\"application/json\"}});case 3:response=_context5.sent;if(!response.ok){_context5.next=12;break;}_context5.next=7;return response.json();case 7:userData=_context5.sent;console.log(userData);return _context5.abrupt(\"return\",userData);case 12:throw new Error(\"User update failed\");case 13:_context5.next=19;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](0);console.error(_context5.t0);throw _context5.t0;case 19:case\"end\":return _context5.stop();}},_callee5,null,[[0,15]]);}));return function updateUser(){return _ref6.apply(this,arguments);};}();var newStory=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(author,title,url){var token,response,storyData,updatedUser;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1)switch(_context6.prev=_context6.next){case 0:token=localStorage.getItem(\"token\");_context6.prev=1;_context6.next=4;return fetch(\"\".concat(BASE_URL,\"/stories\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:token,story:{author:author,title:title,url:url}})});case 4:response=_context6.sent;if(!response.ok){_context6.next=17;break;}_context6.next=8;return response.json();case 8:storyData=_context6.sent;setOwnStories(function(prevStories){return[].concat(_toConsumableArray(prevStories),[storyData.story]);});_context6.next=12;return updateUser();case 12:updatedUser=_context6.sent;setUser(function(prevUser){return{user:_objectSpread(_objectSpread({},prevUser.user),{},{stories:updatedUser.user.stories})};});navigate(\"/home\");_context6.next=18;break;case 17:throw new Error(\"Story submit failed\");case 18:_context6.next=23;break;case 20:_context6.prev=20;_context6.t0=_context6[\"catch\"](1);console.error(_context6.t0);case 23:case\"end\":return _context6.stop();}},_callee6,null,[[1,20]]);}));return function newStory(_x6,_x7,_x8){return _ref7.apply(this,arguments);};}();var deleteStory=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(storyId){var response,updatedUser;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1)switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return fetch(\"\".concat(BASE_URL,\"/stories/\").concat(storyId),{method:\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:storedToken})});case 3:response=_context7.sent;if(!response.ok){_context7.next=11;break;}_context7.next=7;return updateUser();case 7:updatedUser=_context7.sent;setUser(function(prevUser){return{user:_objectSpread(_objectSpread({},prevUser.user),{},{stories:updatedUser.user.stories})};});_context7.next=12;break;case 11:throw new Error(\"Delete failed\");case 12:_context7.next=17;break;case 14:_context7.prev=14;_context7.t0=_context7[\"catch\"](0);console.error(_context7.t0);case 17:case\"end\":return _context7.stop();}},_callee7,null,[[0,14]]);}));return function deleteStory(_x9){return _ref8.apply(this,arguments);};}();var addOrDeleteFavorite=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(fetchMethod,storyId){var response,updatedUser;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1)switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return fetch(\"\".concat(BASE_URL,\"/users/\").concat(storedUsername,\"/favorites/\").concat(storyId),{method:fetchMethod===\"add\"?\"POST\":\"DELETE\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({token:storedToken})});case 3:response=_context8.sent;if(!response.ok){_context8.next=11;break;}_context8.next=7;return updateUser();case 7:updatedUser=_context8.sent;setUser(function(prevUser){return{user:_objectSpread(_objectSpread({},prevUser.user),{},{favorites:updatedUser.user.favorites})};});_context8.next=12;break;case 11:throw new Error(\"Favorite failed\");case 12:_context8.next=17;break;case 14:_context8.prev=14;_context8.t0=_context8[\"catch\"](0);console.error(_context8.t0);case 17:case\"end\":return _context8.stop();}},_callee8,null,[[0,14]]);}));return function addOrDeleteFavorite(_x10,_x11){return _ref9.apply(this,arguments);};}();return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user:user,ownStories:ownStories,isLoggedIn:isLoggedIn,login:login,signup:signup,logout:logout,newStory:newStory,deleteStory:deleteStory,updateUser:updateUser,addOrDeleteFavorite:addOrDeleteFavorite},children:children});};export var useUser=function useUser(){var context=useContext(AuthContext);if(context===undefined){throw new Error(\"useUser must be used within a UserProvider\");}return context;};","map":{"version":3,"names":["createContext","useState","useEffect","useContext","BASE_URL","useNavigate","jsx","_jsx","AuthContext","undefined","AuthProvider","_ref","children","_useState","user","createdAt","favorites","name","stories","updatedAt","username","_useState2","_slicedToArray","setUser","_useState3","_useState4","ownStories","setOwnStories","isLoggedIn","localStorage","length","storedToken","getItem","storedUsername","navigate","autoLogin","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","updatedUser","wrap","_callee$","_context","prev","next","updateUser","sent","t0","console","error","stop","apply","arguments","_callee2","_callee2$","_context2","log","login","_ref4","_callee3","password","response","userData","_callee3$","_context3","fetch","concat","method","body","JSON","stringify","ok","json","saveCredentialsinLocalStorage","token","Error","_x","_x2","signup","_ref5","_callee4","_callee4$","_context4","headers","_x3","_x4","_x5","debug","setItem","logout","clear","_ref6","_callee5","_callee5$","_context5","abrupt","newStory","_ref7","_callee6","author","title","url","storyData","_callee6$","_context6","story","prevStories","_toConsumableArray","prevUser","_objectSpread","_x6","_x7","_x8","deleteStory","_ref8","_callee7","storyId","_callee7$","_context7","_x9","addOrDeleteFavorite","_ref9","_callee8","fetchMethod","_callee8$","_context8","_x10","_x11","Provider","value","useUser","context"],"sources":["/Users/zeldyfriedman/Documents/React/Hack or Snooze React and TS/my-app/src/UserContext.tsx"],"sourcesContent":["import {\n  createContext,\n  FC,\n  useState,\n  useEffect,\n  useContext,\n  ReactNode,\n} from \"react\";\nimport { BASE_URL } from \"./fetchStories\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport interface User {\n  user: {\n    createdAt: string;\n    favorites: StoryObj[];\n    name: string;\n    stories: StoryObj[];\n    updatedAt: string;\n    username: string;\n  };\n}\n\nexport interface StoryObj {\n  author: string;\n  createdAt: string;\n  storyId: string;\n  title: string;\n  updatedAt: string;\n  url: string;\n  username: string;\n}\n\ninterface AuthContextProps {\n  user: User;\n  ownStories: StoryObj[];\n  isLoggedIn: boolean;\n  login: (username: string, password: string) => Promise<void>;\n  signup: (username: string, password: string, name: string) => Promise<void>;\n  logout: () => void;\n  newStory: (author: string, title: string, url: string) => Promise<void>;\n  deleteStory: (storyId: string) => Promise<void>;\n  updateUser: () => Promise<User>;\n  addOrDeleteFavorite: (\n    fetchMethod: \"add\" | \"delete\",\n    storyId: string\n  ) => Promise<void>;\n}\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nconst AuthContext = createContext<AuthContextProps | undefined>(undefined);\n\nexport const AuthProvider: FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User>({\n    user: {\n      createdAt: \"\",\n      favorites: [],\n      name: \"\",\n      stories: [],\n      updatedAt: \"\",\n      username: \"\",\n    },\n  });\n  const [ownStories, setOwnStories] = useState<StoryObj[]>([]);\n  const isLoggedIn = localStorage.length !== 0;\n  const storedToken = localStorage.getItem(\"token\");\n  const storedUsername = localStorage.getItem(\"username\");\n  const navigate = useNavigate();\n\n  const autoLogin = async () => {\n    if (storedToken && storedUsername) {\n      try {\n        const updatedUser = await updateUser();\n        setUser(updatedUser);\n      } catch (error) {\n        console.error(\"Auto login failed:\", error);\n      }\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      console.log(isLoggedIn);\n      await autoLogin();\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => console.log(\"User after update\", user), [user]);\n\n  const login = async (username: string, password: string) => {\n    try {\n      const response = await fetch(`${BASE_URL}/login`, {\n        method: \"POST\",\n        body: JSON.stringify({\n          user: {\n            username,\n            password,\n          },\n        }),\n      });\n      if (response.ok) {\n        const userData = await response.json();\n        console.log(\"User data on login:\", userData);\n        setUser({ user: userData.user });\n        saveCredentialsinLocalStorage(userData.token, userData.user.username);\n        navigate(\"/home\");\n      } else {\n        throw new Error(\"Login failed\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const signup = async (username: string, password: string, name: string) => {\n    try {\n      const response = await fetch(`${BASE_URL}/signup`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          user: {\n            username,\n            password,\n            name,\n          },\n        }),\n      });\n      if (response.ok) {\n        const userData = await response.json();\n        setUser({ user: userData.user });\n        saveCredentialsinLocalStorage(userData.token, userData.user.username);\n        navigate(\"/home\");\n      } else {\n        throw new Error(\"Login failed\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const saveCredentialsinLocalStorage = (token: string, username: string) => {\n    console.debug(\"saveUserCredentialsInLocalStorage\");\n    localStorage.setItem(\"token\", token);\n    localStorage.setItem(\"username\", username);\n    console.log(localStorage);\n  };\n\n  const logout = () => {\n    setUser({\n      user: {\n        createdAt: \"\",\n        favorites: [],\n        name: \"\",\n        stories: [],\n        updatedAt: \"\",\n        username: \"\",\n      },\n    });\n    setOwnStories([]);\n    localStorage.clear();\n    console.log(isLoggedIn);\n  };\n\n  const updateUser = async () => {\n    try {\n      const response = await fetch(\n        `${BASE_URL}/users/${storedUsername}?token=${storedToken}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n        }\n      );\n      if (response.ok) {\n        const userData: User = await response.json();\n        console.log(userData);\n\n        return userData;\n      } else {\n        throw new Error(\"User update failed\");\n      }\n    } catch (error) {\n      console.error(error);\n      throw error;\n    }\n  };\n\n  const newStory = async (author: string, title: string, url: string) => {\n    const token = localStorage.getItem(\"token\");\n    try {\n      const response = await fetch(`${BASE_URL}/stories`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          token,\n          story: {\n            author,\n            title,\n            url,\n          },\n        }),\n      });\n      if (response.ok) {\n        const storyData: {\n          story: {\n            author: string;\n            createdAt: string;\n            storyId: string;\n            title: string;\n            updatedAt: string;\n            url: string;\n            username: string;\n          };\n        } = await response.json();\n        setOwnStories((prevStories) => [...prevStories, storyData.story]);\n        const updatedUser = await updateUser();\n        setUser((prevUser) => ({\n          user: {\n            ...prevUser.user,\n            stories: updatedUser.user.stories,\n          },\n        }));\n        navigate(\"/home\");\n      } else {\n        throw new Error(\"Story submit failed\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const deleteStory = async (storyId: string) => {\n    try {\n      const response = await fetch(`${BASE_URL}/stories/${storyId}`, {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          token: storedToken,\n        }),\n      });\n      if (response.ok) {\n        const updatedUser = await updateUser();\n        setUser((prevUser) => ({\n          user: {\n            ...prevUser.user,\n            stories: updatedUser.user.stories,\n          },\n        }));\n      } else {\n        throw new Error(\"Delete failed\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const addOrDeleteFavorite = async (\n    fetchMethod: \"add\" | \"delete\",\n    storyId: string\n  ) => {\n    try {\n      const response = await fetch(\n        `${BASE_URL}/users/${storedUsername}/favorites/${storyId}`,\n        {\n          method: fetchMethod === \"add\" ? \"POST\" : \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            token: storedToken,\n          }),\n        }\n      );\n      if (response.ok) {\n        const updatedUser = await updateUser();\n        setUser((prevUser) => ({\n          user: {\n            ...prevUser.user,\n            favorites: updatedUser.user.favorites,\n          },\n        }));\n      } else {\n        throw new Error(\"Favorite failed\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        ownStories,\n        isLoggedIn,\n        login,\n        signup,\n        logout,\n        newStory,\n        deleteStory,\n        updateUser,\n        addOrDeleteFavorite,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useUser = () => {\n  const context = useContext(AuthContext);\n\n  if (context === undefined) {\n    throw new Error(\"useUser must be used within a UserProvider\");\n  }\n\n  return context;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}