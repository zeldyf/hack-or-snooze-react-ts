{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zeldyfriedman/Documents/Redux/hack-or-snooze-react-ts/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zeldyfriedman/Documents/Redux/hack-or-snooze-react-ts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faStar as faStarRegular,faTrashAlt}from\"@fortawesome/free-regular-svg-icons\";import{faStar as faStarSolid}from\"@fortawesome/free-solid-svg-icons\";import{useDispatch}from\"react-redux\";import{addOrDeleteFavorite,deleteStory}from\"../store/fetchStories\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Story(_ref){var story=_ref.story,isFavorite=_ref.isFavorite,loggedIn=_ref.loggedIn,source=_ref.source;var url=new URL(story.url);var hostname=\"(\".concat(url.hostname,\")\");var dispatch=useDispatch();var handleStarClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(story){var fetchMethod;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:try{fetchMethod=isFavorite?\"delete\":\"add\";dispatch(addOrDeleteFavorite({fetchMethod:fetchMethod,storyId:story.storyId}));}catch(error){console.error(error);}case 1:case\"end\":return _context.stop();}},_callee);}));return function handleStarClick(_x){return _ref2.apply(this,arguments);};}();var handleTrashClick=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(story){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:try{dispatch(deleteStory({storyId:story.storyId}));}catch(error){console.error(error);}case 1:case\"end\":return _context2.stop();}},_callee2);}));return function handleTrashClick(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"li\",{id:story.storyId,children:/*#__PURE__*/_jsxs(\"div\",{children:[source===\"userstory\"&&/*#__PURE__*/_jsx(\"span\",{className:\"trash-can\",onClick:function onClick(){return handleTrashClick(story);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrashAlt})}),loggedIn&&/*#__PURE__*/_jsx(\"span\",{className:\"star\",onClick:function onClick(){return handleStarClick(story);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:isFavorite?faStarSolid:faStarRegular})}),/*#__PURE__*/_jsx(\"a\",{className:\"story-link\",href:story.url,children:story.title}),/*#__PURE__*/_jsx(\"small\",{children:hostname}),/*#__PURE__*/_jsxs(\"small\",{className:\"story-author\",children:[\"by \",story.author]}),/*#__PURE__*/_jsxs(\"small\",{className:\"story-posted-by\",children:[\"posted by \",story.username]})]})});}","map":{"version":3,"names":["FontAwesomeIcon","faStar","faStarRegular","faTrashAlt","faStarSolid","useDispatch","addOrDeleteFavorite","deleteStory","jsx","_jsx","jsxs","_jsxs","Story","_ref","story","isFavorite","loggedIn","source","url","URL","hostname","concat","dispatch","handleStarClick","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchMethod","wrap","_callee$","_context","prev","next","storyId","error","console","stop","_x","apply","arguments","handleTrashClick","_ref3","_callee2","_callee2$","_context2","_x2","id","children","className","onClick","icon","href","title","author","username"],"sources":["/Users/zeldyfriedman/Documents/Redux/hack-or-snooze-react-ts/src/components/Story.tsx"],"sourcesContent":["import { StoryObj } from \"../store/types\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faStar as faStarRegular,\n  faTrashAlt,\n} from \"@fortawesome/free-regular-svg-icons\";\nimport { faStar as faStarSolid } from \"@fortawesome/free-solid-svg-icons\";\nimport { useDispatch } from \"react-redux\";\nimport { AppDispatch } from \"../store/types\";\nimport { addOrDeleteFavorite, deleteStory } from \"../store/fetchStories\";\n\nexport default function Story({\n  story,\n  isFavorite,\n  loggedIn,\n  source,\n}: {\n  story: StoryObj;\n  isFavorite: boolean;\n  loggedIn: boolean;\n  source: \"userstory\" | \"storylist\" | \"favorites\";\n}) {\n  const url = new URL(story.url);\n  const hostname = `(${url.hostname})`;\n  const dispatch: AppDispatch = useDispatch();\n\n  const handleStarClick = async (story: StoryObj) => {\n    try {\n      const fetchMethod = isFavorite ? \"delete\" : \"add\";\n      dispatch(\n        addOrDeleteFavorite({\n          fetchMethod: fetchMethod,\n          storyId: story.storyId,\n        })\n      );\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleTrashClick = async (story: StoryObj) => {\n    try {\n      dispatch(deleteStory({ storyId: story.storyId }));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <li id={story.storyId}>\n      <div>\n        {source === \"userstory\" && (\n          <span className=\"trash-can\" onClick={() => handleTrashClick(story)}>\n            <FontAwesomeIcon icon={faTrashAlt} />\n          </span>\n        )}\n        {loggedIn && (\n          <span className=\"star\" onClick={() => handleStarClick(story)}>\n            <FontAwesomeIcon icon={isFavorite ? faStarSolid : faStarRegular} />\n          </span>\n        )}\n        <a className=\"story-link\" href={story.url}>\n          {story.title}\n        </a>\n        <small>{hostname}</small>\n        <small className=\"story-author\">by {story.author}</small>\n        <small className=\"story-posted-by\">posted by {story.username}</small>\n      </div>\n    </li>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}