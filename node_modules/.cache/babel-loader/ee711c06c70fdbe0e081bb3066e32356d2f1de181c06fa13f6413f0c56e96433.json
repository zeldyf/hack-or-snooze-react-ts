{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{autoLogin,signup,loginUser}from\"./fetchUser\";import{addOrDeleteFavorite,deleteStory,newStory}from\"./fetchStories\";var initialState={createdAt:\"\",favorites:[],name:\"\",stories:[],updatedAt:\"\",username:\"\",status:\"idle\"};export var userSlice=createSlice({name:\"user\",initialState:initialState,reducers:{logout:function logout(state){state.createdAt=\"\";state.favorites=[];state.name=\"\";state.stories=[];state.updatedAt=\"\";state.username=\"\";state.status=\"idle\";localStorage.clear();}},extraReducers:function extraReducers(builder){builder.addCase(signup.pending,function(state){state.status=\"loading\";}).addCase(signup.fulfilled,function(state,action){state.username=action.payload.user.username;state.updatedAt=action.payload.user.updatedAt;state.createdAt=action.payload.user.createdAt;state.favorites=action.payload.user.favorites;state.name=action.payload.user.name;state.stories=action.payload.user.stories;state.status=\"succeeded\";localStorage.setItem('token',action.payload.token);localStorage.setItem('username',action.payload.user.username);}).addCase(signup.rejected,function(state){state.status=\"failed\";}).addCase(loginUser.pending,function(state){state.status=\"loading\";}).addCase(loginUser.fulfilled,function(state,action){state.username=action.payload.user.username;state.updatedAt=action.payload.user.updatedAt;state.createdAt=action.payload.user.createdAt;state.favorites=action.payload.user.favorites;state.name=action.payload.user.name;state.stories=action.payload.user.stories;state.status=\"succeeded\";localStorage.setItem('token',action.payload.token);localStorage.setItem('username',action.payload.user.username);console.log(localStorage);}).addCase(autoLogin.pending,function(state){state.status='loading';}).addCase(autoLogin.fulfilled,function(state,action){state.username=action.payload.user.username;state.updatedAt=action.payload.user.updatedAt;state.createdAt=action.payload.user.createdAt;state.favorites=action.payload.user.favorites;state.name=action.payload.user.name;state.stories=action.payload.user.stories;state.status=\"succeeded\";}).addCase(newStory.fulfilled,function(state,action){console.log(action.payload);state.stories.push(action.payload.story);}).addCase(deleteStory.fulfilled,function(state,action){console.log(action.payload.story.storyId);state.stories=state.stories.filter(function(story){return story.storyId!==action.payload.story.storyId;});}).addCase(addOrDeleteFavorite.fulfilled,function(state,action){state.favorites=action.payload.user.favorites;});}});var logout=userSlice.actions.logout;export{logout};export var userReducer=userSlice.reducer;","map":{"version":3,"names":["createSlice","autoLogin","signup","loginUser","addOrDeleteFavorite","deleteStory","newStory","initialState","createdAt","favorites","name","stories","updatedAt","username","status","userSlice","reducers","logout","state","localStorage","clear","extraReducers","builder","addCase","pending","fulfilled","action","payload","user","setItem","token","rejected","console","log","push","story","storyId","filter","actions","userReducer","reducer"],"sources":["/Users/zeldyfriedman/Documents/Redux/hack-or-snooze-react-ts/src/store/userSlice.ts"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { autoLogin, signup, loginUser } from \"./fetchUser\";\nimport { addOrDeleteFavorite, deleteStory, newStory } from \"./fetchStories\";\nimport { StoryObj } from \"./types\";\n\nconst initialState = {\n    createdAt: \"\",\n    favorites: [] as StoryObj[],\n    name: \"\",\n    stories: [] as StoryObj[],\n    updatedAt: \"\",\n    username: \"\",\n    status: \"idle\",\n};\n\nexport const userSlice = createSlice({\n    name: \"user\",\n    initialState,\n    reducers: {\n        logout: (state) => {\n            state.createdAt = \"\";\n            state.favorites = [];\n            state.name = \"\";\n            state.stories = [];\n            state.updatedAt = \"\";\n            state.username = \"\";\n            state.status = \"idle\";\n\n            localStorage.clear();\n        },\n    },\n    extraReducers: (builder) => {\n        builder\n            .addCase(signup.pending, (state) => {\n                state.status = \"loading\"\n            })\n            .addCase(signup.fulfilled, (state, action) => {\n                state.username = action.payload.user.username;\n                state.updatedAt = action.payload.user.updatedAt;\n                state.createdAt = action.payload.user.createdAt;\n                state.favorites = action.payload.user.favorites;\n                state.name = action.payload.user.name;\n                state.stories = action.payload.user.stories;\n                state.status = \"succeeded\"\n\n                localStorage.setItem('token', action.payload.token);\n                localStorage.setItem('username', action.payload.user.username);\n            })\n            .addCase(signup.rejected, (state) => {\n                state.status = \"failed\"\n            })\n            .addCase(loginUser.pending, (state) => {\n                state.status = \"loading\"\n            })\n            .addCase(loginUser.fulfilled, (state, action) => {\n                state.username = action.payload.user.username;\n                state.updatedAt = action.payload.user.updatedAt;\n                state.createdAt = action.payload.user.createdAt;\n                state.favorites = action.payload.user.favorites;\n                state.name = action.payload.user.name;\n                state.stories = action.payload.user.stories;\n                state.status = \"succeeded\"\n\n                localStorage.setItem('token', action.payload.token);\n                localStorage.setItem('username', action.payload.user.username);\n                console.log(localStorage)\n            })\n            .addCase(autoLogin.pending, (state) => {\n                state.status = 'loading'\n            })\n            .addCase(autoLogin.fulfilled, (state, action) => {\n                state.username = action.payload.user.username;\n                state.updatedAt = action.payload.user.updatedAt;\n                state.createdAt = action.payload.user.createdAt;\n                state.favorites = action.payload.user.favorites;\n                state.name = action.payload.user.name;\n                state.stories = action.payload.user.stories;\n                state.status = \"succeeded\"\n            })\n            .addCase(newStory.fulfilled, (state, action) => {\n                console.log(action.payload)\n                state.stories.push(action.payload.story)\n            })\n            .addCase(deleteStory.fulfilled, (state, action) => {\n                console.log(action.payload.story.storyId)\n                state.stories = state.stories.filter(story => story.storyId !== action.payload.story.storyId)\n            })\n            .addCase(addOrDeleteFavorite.fulfilled, (state, action) => {\n                state.favorites = action.payload.user.favorites\n            });\n    },\n});\n\nexport const { logout } = userSlice.actions;\nexport const userReducer = userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}