{"ast":null,"code":"import { createAsyncThunk } from \"@reduxjs/toolkit\";\nexport const BASE_URL = \"https://hack-or-snooze-v3.herokuapp.com\";\nexport const signup = createAsyncThunk(`user/signup`, async ({\n  username,\n  password,\n  name\n}) => {\n  const response = await fetch(BASE_URL + \"/signup\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      user: {\n        password,\n        username,\n        name\n      }\n    })\n  });\n  console.log(response);\n  if (!response.ok) {\n    throw new Error(\"Signup failed\");\n  }\n  const userData = await response.json();\n  console.log(\"User data on signup:\", userData);\n  return userData;\n});\nexport const loginUser = createAsyncThunk(`user/login`, async ({\n  username,\n  password\n}) => {\n  const response = await fetch(BASE_URL + \"/login\", {\n    method: \"POST\",\n    body: JSON.stringify({\n      user: {\n        password,\n        username\n      }\n    })\n  });\n  console.log(response);\n  if (!response.ok) {\n    throw new Error(\"Login failed\");\n  }\n  const userData = await response.json();\n  console.log(\"User data on login:\", userData);\n  return userData;\n});\nexport const autoLogin = createAsyncThunk(\"user/autoLogin\", async () => {\n  const username = localStorage.getItem(\"username\");\n  const token = localStorage.getItem(\"token\");\n  const response = await fetch(`${BASE_URL}/users/${username}?token=${token}`, {\n    method: \"GET\"\n  });\n  if (!response.ok) {\n    throw new Error(\"Login failed\");\n  }\n  const userData = await response.json();\n  console.log(\"User data on login:\", userData);\n  return userData;\n});\nexport default loginUser;","map":{"version":3,"names":["createAsyncThunk","BASE_URL","signup","username","password","name","response","fetch","method","body","JSON","stringify","user","console","log","ok","Error","userData","json","loginUser","autoLogin","localStorage","getItem","token"],"sources":["/Users/zeldyfriedman/Documents/Redux/hack-or-snooze-react-ts/src/store/fetchUser.tsx"],"sourcesContent":["import { createAsyncThunk } from \"@reduxjs/toolkit\";\n\nexport const BASE_URL = \"https://hack-or-snooze-v3.herokuapp.com\";\n\nexport const signup = createAsyncThunk(\n  `user/signup`,\n  async ({\n    username,\n    password,\n    name,\n  }: {\n    username: string;\n    password: string;\n    name: string;\n  }) => {\n    const response = await fetch(BASE_URL + \"/signup\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        user: {\n          password,\n          username,\n          name,\n        },\n      }),\n    });\n    console.log(response);\n    if (!response.ok) {\n      throw new Error(\"Signup failed\");\n    }\n\n    const userData = await response.json();\n    console.log(\"User data on signup:\", userData);\n\n    return userData;\n  }\n);\n\nexport const loginUser = createAsyncThunk(\n  `user/login`,\n  async ({ username, password }: { username: string; password: string }) => {\n    const response = await fetch(BASE_URL + \"/login\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        user: {\n          password,\n          username,\n        },\n      }),\n    });\n    console.log(response);\n    if (!response.ok) {\n      throw new Error(\"Login failed\");\n    }\n\n    const userData = await response.json();\n    console.log(\"User data on login:\", userData);\n\n    return userData;\n  }\n);\n\nexport const autoLogin = createAsyncThunk(\"user/autoLogin\", async () => {\n  const username = localStorage.getItem(\"username\");\n  const token = localStorage.getItem(\"token\");\n  const response = await fetch(`${BASE_URL}/users/${username}?token=${token}`, {\n    method: \"GET\",\n  });\n  if (!response.ok) {\n    throw new Error(\"Login failed\");\n  }\n\n  const userData = await response.json();\n  console.log(\"User data on login:\", userData);\n\n  return userData;\n});\n\nexport default loginUser;\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,kBAAkB;AAEnD,OAAO,MAAMC,QAAQ,GAAG,yCAAyC;AAEjE,OAAO,MAAMC,MAAM,GAAGF,gBAAgB,CACnC,aAAY,EACb,OAAO;EACLG,QAAQ;EACRC,QAAQ;EACRC;AAKF,CAAC,KAAK;EACJ,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACN,QAAQ,GAAG,SAAS,EAAE;IACjDO,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBC,IAAI,EAAE;QACJR,QAAQ;QACRD,QAAQ;QACRE;MACF;IACF,CAAC;EACH,CAAC,CAAC;EACFQ,OAAO,CAACC,GAAG,CAACR,QAAQ,CAAC;EACrB,IAAI,CAACA,QAAQ,CAACS,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,eAAe,CAAC;EAClC;EAEA,MAAMC,QAAQ,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;EACtCL,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,QAAQ,CAAC;EAE7C,OAAOA,QAAQ;AACjB,CACF,CAAC;AAED,OAAO,MAAME,SAAS,GAAGnB,gBAAgB,CACtC,YAAW,EACZ,OAAO;EAAEG,QAAQ;EAAEC;AAAiD,CAAC,KAAK;EACxE,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAACN,QAAQ,GAAG,QAAQ,EAAE;IAChDO,MAAM,EAAE,MAAM;IACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBC,IAAI,EAAE;QACJR,QAAQ;QACRD;MACF;IACF,CAAC;EACH,CAAC,CAAC;EACFU,OAAO,CAACC,GAAG,CAACR,QAAQ,CAAC;EACrB,IAAI,CAACA,QAAQ,CAACS,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;EACjC;EAEA,MAAMC,QAAQ,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;EACtCL,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEG,QAAQ,CAAC;EAE5C,OAAOA,QAAQ;AACjB,CACF,CAAC;AAED,OAAO,MAAMG,SAAS,GAAGpB,gBAAgB,CAAC,gBAAgB,EAAE,YAAY;EACtE,MAAMG,QAAQ,GAAGkB,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;EACjD,MAAMC,KAAK,GAAGF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMhB,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,UAASE,QAAS,UAASoB,KAAM,EAAC,EAAE;IAC3Ef,MAAM,EAAE;EACV,CAAC,CAAC;EACF,IAAI,CAACF,QAAQ,CAACS,EAAE,EAAE;IAChB,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;EACjC;EAEA,MAAMC,QAAQ,GAAG,MAAMX,QAAQ,CAACY,IAAI,CAAC,CAAC;EACtCL,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEG,QAAQ,CAAC;EAE5C,OAAOA,QAAQ;AACjB,CAAC,CAAC;AAEF,eAAeE,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}